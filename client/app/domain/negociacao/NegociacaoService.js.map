{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obtemNegociacoesDaSemana","get","then","negociacoes","map","obj","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesNoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","atual","proximo","getTime","catch"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,2CAA2B;AACvB,2BAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EAAqCC,IAArC,CACHC,eAAeA,YAAYC,GAAZ,CAAgBC,OAAO,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,IAAIE,IAAb,CAAf,EAAmCF,IAAIG,UAAvC,EAAmDH,IAAII,KAAvD,CAAvB,CADZ,EAEHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAJE,CAAP;AAMH;;AAEDC,mDAAmC;AAC/B,2BAAO,KAAKb,KAAL,CAAWE,GAAX,CAAe,sBAAf,EAAuCC,IAAvC,CACHC,eAAeA,YAAYC,GAAZ,CAAgBC,OAAO,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,IAAIE,IAAb,CAAf,EAAmCF,IAAIG,UAAvC,EAAmDH,IAAII,KAAvD,CAAvB,CADZ,EAEHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACH,qBAJE,CAAP;AAMH;;AAEDE,oDAAoC;AAChC,2BAAO,KAAKd,KAAL,CAAWE,GAAX,CAAe,uBAAf,EAAwCC,IAAxC,CACHC,eAAeA,YAAYC,GAAZ,CAAgBC,OAAO,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,IAAIE,IAAb,CAAf,EAAmCF,IAAIG,UAAvC,EAAmDH,IAAII,KAAvD,CAAvB,CADZ,EAEHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,4DAAV,CAAN;AACH,qBAJE,CAAP;AAMH;;AAEDG,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKhB,wBAAL,EADe,EAEf,KAAKY,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKNX,IALM,CAKDe,WAAWA,QACZC,MADY,CACL,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADhB,EACwC,EADxC,EAEZE,IAFY,CAEP,CAACC,KAAD,EAAQC,OAAR,KAAoBA,QAAQjB,IAAR,CAAakB,OAAb,KAAyBF,MAAMhB,IAAN,CAAWkB,OAAX,EAFtC,CALV,EASNC,KATM,CASAhB,OAAO;AACV,8BAAM,IAAIC,KAAJ,CAAU,mDAAV,CAAN;AACH,qBAXM,CAAP;AAYH;AA9C0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\n\nexport class NegociacaoService {\n\n    constructor() {\n        this._http = new HttpService();\n    }\n\n    obtemNegociacoesDaSemana() {\n        return this._http.get('negociacoes/semana').then(\n            negociacoes => negociacoes.map(obj => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor)),\n            err => {\n                throw new Error('Não foi possível obter as negociações da semana.');\n            }\n        );\n    }\n\n    obtemNegociacoesDaSemanaAnterior() {\n        return this._http.get('negociacoes/anterior').then(\n            negociacoes => negociacoes.map(obj => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor)),\n            err => {\n                throw new Error('Não foi possível obter as negociações da semana anterior.');\n            }\n        );\n    }\n\n    obtemNegociacoesDaSemanaRetrasada() {\n        return this._http.get('negociacoes/retrasada').then(\n            negociacoes => negociacoes.map(obj => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor)),\n            err => {\n                throw new Error('Não foi possível obter as negociações da semana retrasada.');\n            }\n        );\n    }\n\n    obtemNegociacoesNoPeriodo() {\n        return Promise.all([\n            this.obtemNegociacoesDaSemana(),\n            this.obtemNegociacoesDaSemanaAnterior(),\n            this.obtemNegociacoesDaSemanaRetrasada()\n        ])\n        .then(periodo => periodo\n            .reduce((novoArray, item) => novoArray.concat(item), [])\n            .sort((atual, proximo) => proximo.data.getTime() - atual.data.getTime())\n        )\n        .catch(err => {\n            throw new Error('Não foi possível obter as negociações do período.');\n        });\n    }\n}"]}